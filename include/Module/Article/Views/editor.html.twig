{% extends "@editor/base.html.twig" %}



{% block javascript %}
{{ parent() }}
<script>const saveEndpoint = "{{ '/article/endpoint/save' | access_path | url }}";</script>

{% if article %}
<script>
    const article = {
        id: "{{ article.id }}",
        title: "{{ article.title }}",
        slug: "{{ article.slug }}",
        keywords: "{{ article.keywords }}",
        description: "{{ article.description }}",
        category: "{{ article.category }}",
        data: {
            components: JSON.parse('{{ article.data.components | json_encode | raw }}'),
            css: '{{ article.data.css }}',
        },
        status: "{{ article.status }}",
        created_at: "{{ article.created_at }}",
        updated_at: "{{ article.updated_at }}",
    };

    window.article = article;
    editor.onReady = (editor) => {
        editor.setComponents(article.data.components);
        editor.setStyle(article.data.css);
    }
</script>
{% endif %}

{% if settings %}
<script>
    const settings = JSON.parse('{{ settings | json_encode | raw }}');
    if (window.article) {
        window.article.settings = settings;
    } else {
        window.article = {
            settings
        };
    }
</script>
{% endif %}


<script src="{{ '@article/dist/editor.js' | assets }}"></script>

{{ parent() }}
{% endblock %}
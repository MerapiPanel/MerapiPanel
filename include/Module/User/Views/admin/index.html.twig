{% extends "@panel/base.html.twig" %}
{% block header_title %}Users{% endblock %}

{% block subheader_menu %}

<a href="{{ '/users/add' | access_path }}" class="menu-item">
    <i class="fa fa-plus"></i> add user
</a>

{% endblock %}

{% set users = api.User.fetchAll %}


{% block content %}

<div class="p-3">
    <h2 class="mb-3">Total {{ users | length }}</h2>

    <ol class="list-group list-group-flush gap-2" style="max-width: 800px;" onload="__.render.bind(this)()">

        {% for x in 1..6 %}
        <li class="list-group-item d-flex align-items-start position-relative placeholder-glow">
            <img class="w-full h-full object-cover rounded-2 placeholder" width="45" height="45" alt="">
            <div class="ms-2 w-100">
                <span class="placeholder col-6"></span>
                <span class="placeholder w-75"></span>
            </div>
        </li>
        {% endfor %}

        {#
        {% for user in users %}
        
        {% endfor %} #}
    </ol>
</div>
{% endblock %}

{% block javascript %}
{{ parent() }}

<script>
    __.settings = {
        'urls': {
            'fetch': "{{ '/api/User/fetchAll' | access_path }}",
            'update': "{{ '/api/User/update' | access_path }}",
            'delete': "{{ '/api/User/delete' | access_path }}"
        },
        'session': JSON.parse('{{ api.Auth.LogedinUser | json_encode | raw }}')
    }
</script>


<script src="{{ '@user/dist/index.js' | assets }}"></script>
{% endblock %}
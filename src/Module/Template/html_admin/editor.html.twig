{% extends "@admin>panel/base.html.twig" %}

{% block head_javascripts %}
<script src="{{ '@template/dist/editor.bundle.js' | assets }}"></script>
{% endblock %}


{% block stylesheets %}
<link rel="stylesheet" href="//unpkg.com/grapesjs/dist/css/grapes.min.css">
<style>
    .gjs-pn-active {
        color: rgb(59 130 246);
    }

    .small-modal .gjs-mdl-dialog {
        max-width: 500px;
    }

    .gjs-one-bg {
        background-color: #384246;
    }
</style>
{% endblock %}


{% block body %}

<body>
    <div>
        <div id="gjs"></div>
    </div>


    {% block javascripts %}
    {{ parent() }}

    {% if template %}
    <script>
        $(() => {
            merapi.templateEditor({
                id: "{{ template.id }}",
                name: "{{template.name}}",
                description: "{{template.description}}",
                url: "{{ ('template/view/'~template.id) | admin_url }}",
                save: "{{ ('template/save') | admin_url }}",
                assets: {
                    url: "{{ admin.FileManager_uploadEndpoint }}",
                    name: "files",
                    upload: "{{ admin.FileManager_uploadEndpoint }}",
                }
            });
        })
    </script>
    {% else %}
    <script>
        $(() => {
            merapi.templateEditor({
                save: "{{ ('template/save') | admin_url }}",
            });
        })
    </script>
    {% endif %}

    {% endblock %}

</body>

{% endblock %}